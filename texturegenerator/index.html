<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PBR Texture Generator</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      background: #070a11;
      color: #d4d4d4;
      min-height: 100vh;
    }
    .app {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
      color: #569cd6;
    }
    .capabilities {
      text-align: center;
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 20px;
      padding: 8px;
      background: #0d1117;
      border: 1px solid #1c2028;
      border-radius: 4px;
    }
    .capabilities .backend {
      color: #569cd6;
      font-weight: bold;
    }
    .capabilities .feature {
      display: inline-block;
      margin: 0 4px;
      padding: 2px 6px;
      background: #161b22;
      border-radius: 3px;
    }
    .capabilities .feature.active {
      background: #0c2d1a;
      color: #4ec9b0;
    }
    .capabilities .feature.inactive {
      background: #2a0e0e;
      color: #f48771;
    }
    .drop-zone {
      border: 2px dashed #1c2028;
      border-radius: 8px;
      padding: 40px;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.2s, background 0.2s;
      margin-bottom: 20px;
    }
    .drop-zone:hover, .drop-zone.dragover {
      border-color: #569cd6;
      background: rgba(86, 156, 214, 0.1);
    }
    .drop-zone input {
      display: none;
    }
    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
      padding: 15px;
      background: #0d1117;
      border: 1px solid #1c2028;
      border-radius: 8px;
    }
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .control-group label {
      font-size: 12px;
      color: #9ca3af;
    }
    .control-group input[type="range"] {
      width: 100%;
    }
    .control-group .value {
      font-size: 11px;
      color: #6b7280;
      text-align: right;
    }
    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    .preview-item {
      background: #0d1117;
      border: 1px solid #1c2028;
      border-radius: 8px;
      overflow: hidden;
    }
    .preview-item h3 {
      padding: 10px;
      font-size: 14px;
      background: #161b22;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .preview-item canvas {
      display: block;
      width: 100%;
      height: auto;
      aspect-ratio: 1;
      background: #070a11;
    }
    .preview-item button {
      padding: 4px 10px;
      font-size: 12px;
      background: #569cd6;
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
    }
    .preview-item button:hover {
      background: #4b8bca;
    }
    .hidden {
      display: none !important;
    }
    .status {
      text-align: center;
      padding: 10px;
      color: #6b7280;
    }
  </style>
  <script type="module" crossorigin src="/3dverse-tools/texturegenerator/assets/index-BkZLqU37.js"></script>
</head>
<body>
  <div class="app">
    <h1>PBR Texture Generator</h1>

    <div class="capabilities" id="capabilities">
      Detecting capabilities...
    </div>

    <div class="drop-zone" id="dropZone">
      <p>Drop an image here or click to select</p>
      <p style="font-size: 12px; color: #4b5563; margin-top: 10px;">Supports PNG, JPEG up to 4096x4096</p>
      <input type="file" id="fileInput" accept="image/png,image/jpeg,image/webp">
    </div>

    <div class="status" id="status">Load an image to begin</div>

    <!-- 3D Material Preview Section -->
    <div class="preview-3d-section hidden" id="preview3DSection">
      <h2 style="margin-bottom: 10px; font-size: 16px;">Material Preview</h2>
      <div id="previewControlsContainer"></div>
      <div class="preview-3d-container" style="
        width: 100%;
        height: 400px;
        background: #070a11;
        border-radius: 8px;
        overflow: hidden;
        margin-bottom: 20px;
      ">
        <canvas id="previewCanvas" style="width: 100%; height: 100%;"></canvas>
      </div>
    </div>

    <!-- Parameter Controls (above preview) -->
    <div class="controls hidden" id="controls">
      <div class="control-group">
        <label>Shadow Reduction (Albedo)</label>
        <input type="range" id="shadowReduction" min="0" max="1" step="0.05" value="0.5">
        <span class="value" id="shadowReductionValue">0.5</span>
      </div>
      <div class="control-group">
        <label>Highlight Reduction (Albedo)</label>
        <input type="range" id="highlightReduction" min="0" max="1" step="0.05" value="0.3">
        <span class="value" id="highlightReductionValue">0.3</span>
      </div>
      <div class="control-group">
        <label>Normal Strength</label>
        <input type="range" id="normalStrength" min="0.1" max="5" step="0.1" value="1.0">
        <span class="value" id="normalStrengthValue">1.0</span>
      </div>
      <div class="control-group">
        <label>Roughness Scale</label>
        <input type="range" id="roughnessScale" min="0" max="2" step="0.05" value="1.0">
        <span class="value" id="roughnessScaleValue">1.0</span>
      </div>
      <div class="control-group">
        <label>Roughness Offset</label>
        <input type="range" id="roughnessOffset" min="-0.5" max="0.5" step="0.05" value="0.0">
        <span class="value" id="roughnessOffsetValue">0.0</span>
      </div>
      <div class="control-group">
        <label>Metallic Threshold</label>
        <input type="range" id="metallicThreshold" min="0" max="1" step="0.05" value="0.5">
        <span class="value" id="metallicThresholdValue">0.5</span>
      </div>
    </div>

    <div class="preview-grid hidden" id="previewGrid">
      <div class="preview-item">
        <h3>Input <button id="exportInput">Export</button></h3>
        <canvas id="inputCanvas"></canvas>
      </div>
      <div class="preview-item">
        <h3>Basecolor <button id="exportBasecolor">Export</button></h3>
        <canvas id="basecolorCanvas"></canvas>
      </div>
      <div class="preview-item">
        <h3>Normal Map <button id="exportNormal">Export</button></h3>
        <canvas id="normalCanvas"></canvas>
      </div>
      <div class="preview-item">
        <h3>Roughness <button id="exportRoughness">Export</button></h3>
        <canvas id="roughnessCanvas"></canvas>
      </div>
      <div class="preview-item">
        <h3>Metallic <button id="exportMetallic">Export</button></h3>
        <canvas id="metallicCanvas"></canvas>
      </div>
      <div class="preview-item hidden" id="heightPreviewItem">
        <h3>Height <button id="exportHeight">Export</button></h3>
        <canvas id="heightCanvas"></canvas>
      </div>
    </div>
  </div>

</body>
</html>
